(this.webpackJsonpnetdisk=this.webpackJsonpnetdisk||[]).push([[0],{206:function(e,t,n){e.exports=n(414)},211:function(e,t,n){},414:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(3),r=n.n(c),l=(n(211),n(36)),i=n(37),u=n(42),s=n(38),d=n(43),f=n(419),p=n(415),h=(n(129),n(417)),m=n(179),g=n(420),v=n(62),b=n(127),y=n.n(b),O=n(63),w=n(169),j="http://47.98.229.148:2001";function k(e,t){return console.log(e,t),function(n){fetch("".concat(j,"/deletefile?path=").concat(t,"&key=").concat(e)),n(function(e){return{type:"reduce",payload:e}}(e))}}function E(){return console.log(-1),function(){var e=Object(w.a)(y.a.mark((function e(t,n){var a,o,c,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(j,"/getallfileinfo"),e.next=3,fetch(a);case 3:return o=e.sent,e.next=6,o.json();case 6:c=e.sent,r=(r=c.data).map((function(e){return Object(O.a)({},e,{key:e.filekey})})),console.log(0),t({type:"data",payload:r}),console.log(1);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}var D=n(203);function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"add"===t.type?[].concat(Object(D.a)(e),[t.payload]):"reduce"===t.type?e.filter((function(e){return e.key!==t.payload})):"data"===t.type?t.payload:e}var C={type:"pdfshow"},P={type:"pdfhide"};function x(e){return{type:"pdfchangeurl",payload:e}}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1,url:""},t=arguments.length>1?arguments[1]:void 0;return"pdfshow"===t.type?Object(O.a)({},e,{show:!0}):"pdfhide"==t.type?Object(O.a)({},e,{show:!1}):"pdfchangeurl"===t.type?Object(O.a)({},e,{url:t.payload,show:!0}):e}var I=n(72),S=n(170),R=n.n(S),U=n(171),M=Object(I.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={fileinfo:F(e.fileinfo,t),pdfcontrol:L(e.pdfcontrol,t)};return n}),Object(I.a)(U.a,R.a));console.log(M.getState());var B=h.a.confirm;var N=[{title:"\u6587\u4ef6\u540d",dataIndex:"filename",key:"filename",render:function(e){return o.a.createElement("a",null,e)}},{title:"\u6587\u4ef6\u5927\u5c0f",dataIndex:"size",key:"size"},{title:"\u4e0a\u4f20\u65e5\u671f",dataIndex:"date",key:"date",sorter:function(e,t){return e.date-t.date}},{title:"\u6587\u4ef6\u7c7b\u578b",key:"tags",dataIndex:"tags",render:function(e){return o.a.createElement("span",null,o.a.createElement(f.a,{color:"volcano"},e))}},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return o.a.createElement("span",null,o.a.createElement("a",{style:{marginRight:16},onClick:function(){var e,n;e=t.key,n=t.path,B({title:"\u4f60\u786e\u5b9a\u4f60\u60f3\u8981\u5220\u9664\u8fd9\u4e2a\u6587\u4ef6\u5417?",icon:o.a.createElement(g.a,null),content:"When clicked the OK button, this dialog will be closed after 1 second",onOk:function(){M.dispatch(k(e,n))},onCancel:function(){}})}},"\u5220\u9664"),o.a.createElement("a",{onClick:function(){var e,n;console.log("\u4e0b\u8f7d"),console.log(t.path),e=t.path,n=t.filename,console.log("\u6211\u8981\u4e0b\u8f7d\u54af"),fetch("".concat(j,"/download?path=").concat(e)).then((function(e){return e.blob()})).then((function(e){if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(e,n);else{var t=document.createElement("a");document.body.appendChild(t);var a=window.URL.createObjectURL(e);t.href=a,t.download=n,t.target="_blank",t.click(),t.remove(),window.URL.revokeObjectURL(a)}}))}},"\u4e0b\u8f7d"))}}],W=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={data:[],curKey:0,isLoading:!0},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log("000"),this.props.getFileInfo(),this.setState({isLoading:!1})}},{key:"render",value:function(){return o.a.createElement(m.a,{tip:"Loading...",spinning:this.state.isLoading},o.a.createElement(p.a,{columns:N,dataSource:this.props.fileinfo,onRow:function(e){return{onDoubleClick:function(t){if(console.log(e),"pdf"===e.tags){console.log(e.path);var n=e.path,a=n.lastIndexOf("/");console.log(n[a]);var o=n.substring(a);M.dispatch(x(o))}},onClick:function(e){},onContextMenu:function(e){},onMouseEnter:function(e){},onMouseLeave:function(e){}}}}))}}]),t}(a.Component);var z,A=Object(v.b)((function(e){return{fileinfo:e.fileinfo}}),(function(e){return{getFileInfo:function(){e(E())},deleteFIle:function(t,n){e(k(t,n))},changePDFUrl:function(t){e(x(t))}}}))(W),J=n(73),K=n(416),H=n(418),T=n(421),$=K.a.Dragger,_=(z={name:"file",multiple:!0,director:!0,showUploadList:!0,action:"".concat(j,"/upload")},Object(J.a)(z,"name","fileName"),Object(J.a)(z,"onChange",(function(e){var t=e.file.status;"uploading"!==t&&console.log(e.file,e.fileList),"done"===t?(H.a.success("".concat(e.file.name," \u6587\u4ef6\u4e0a\u4f20\u6210\u529f\uff01.")),M.dispatch(E())):"error"===t&&H.a.error("".concat(e.file.name," \u6587\u4ef6\u4e0a\u4f20\u5931\u8d25."))})),z),q=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement($,_,o.a.createElement("p",{className:"ant-upload-drag-icon"},o.a.createElement(T.a,null)),o.a.createElement("p",{className:"ant-upload-text"},"\u70b9\u51fb\u4e0a\u4f20\u6216\u5c06\u6587\u4ef6\u62d6\u653e\u5230\u8be5\u533a\u57df\u4e0a\u4f20"),o.a.createElement("p",{className:"ant-upload-hint"},"\u53cc\u51fb\u53ef\u9884\u89c8\u8be5\u884c\u7684\u6587\u4ef6\uff0c\u76ee\u524d\u4ec5\u652f\u6301",o.a.createElement("strong",null," PDF")," \u683c\u5f0f\u7684\u6587\u6863\u9884\u89c8"))}}]),t}(a.Component),G=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).showModal=function(){n.prop.showPDF&&n.props.showPDF()},n.handleOk=function(e){console.log(e),n.setState({visible:!1}),n.props.hidePDF&&n.props.hidePDF()},n.handleCancel=function(e){console.log(e),n.props.hidePDF&&n.props.hidePDF()},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=document.documentElement.clientHeight,t="".concat(j,"/web/viewer.html?file=../file");return console.log(this.props.pdfurl),o.a.createElement("div",null,o.a.createElement(h.a,{title:"PDF\u6587\u6863\u9884\u89c8-gumeik",visible:this.props.isShowPDF,onOk:this.handleOk,onCancel:this.handleCancel,width:"85%",height:700,footer:null,bodyStyle:{padding:0,marginTop:0}},o.a.createElement("iframe",{src:"".concat(t).concat(this.props.pdfurl),style:{width:"100%",height:.7*e}})))}}]),t}(o.a.Component);var Q=Object(v.b)((function(e){return{isShowPDF:e.pdfcontrol.show,pdfurl:e.pdfcontrol.url}}),(function(e){return{showPDF:function(){e(C)},hidePDF:function(){e(P)}}}))(G),V=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(v.a,{store:M},o.a.createElement(Q,null),o.a.createElement(q,null),o.a.createElement(A,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[206,1,2]]]);
//# sourceMappingURL=main.389daf91.chunk.js.map