(this.webpackJsonpnetdisk=this.webpackJsonpnetdisk||[]).push([[0],{231:function(e,t,n){e.exports=n(470)},236:function(e,t,n){},438:function(e,t,n){},467:function(e,t){},470:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(3),c=n.n(i),r=(n(236),n(13)),l=n(14),s=n(16),u=n(15),h=n(17),d=n(476),p=n(471),f=(n(141),n(473)),m=n(204),g=n(477),v=n(69),b=n(138),y=n.n(b),w=n(24),O=n(194),j="http://47.98.229.148:2001";function k(e,t){return console.log(e,t),function(n){fetch("".concat(j,"/deletefile?path=").concat(t,"&key=").concat(e)),n(function(e){return{type:"reduce",payload:e}}(e))}}function E(){return console.log(-1),function(){var e=Object(O.a)(y.a.mark((function e(t,n){var a,o,i,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(j,"/getallfileinfo"),e.next=3,fetch(a);case 3:return o=e.sent,e.next=6,o.json();case 6:i=e.sent,c=(c=i.data).map((function(e){return Object(w.a)({},e,{key:e.filekey})})),console.log(0),t({type:"data",payload:c}),console.log(1);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}var C=n(229);function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"add"===t.type?[].concat(Object(C.a)(e),[t.payload]):"reduce"===t.type?e.filter((function(e){return e.key!==t.payload})):"data"===t.type?t.payload:e}var M={type:"pdfshow"},F={type:"pdfhide"};function D(e){return{type:"pdfchangeurl",payload:e}}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1,url:""},t=arguments.length>1?arguments[1]:void 0;return"pdfshow"===t.type?Object(w.a)({},e,{show:!0}):"pdfhide"==t.type?Object(w.a)({},e,{show:!1}):"pdfchangeurl"===t.type?Object(w.a)({},e,{url:t.payload,show:!0}):e}var x={type:"show-video"},P={type:"hide-video"};function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isShowModal:!1,url:""},t=arguments.length>1?arguments[1]:void 0;return"show-video"===t.type?Object(w.a)({},e,{isShowModal:!0}):"hide-video"===t.type?Object(w.a)({},e,{isShowModal:!1}):"change-video-url"===t.type?{isShowModal:!0,url:t.payload}:e}var I={type:"show-picture"},A={type:"hide-picture"};function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isShowModal:!1,url:""},t=arguments.length>1?arguments[1]:void 0;return"show-picture"===t.type?Object(w.a)({},e,{isShowModal:!0}):"hide-picture"===t.type?Object(w.a)({},e,{isShowModal:!1}):"change-picture-url"===t.type?{isShowModal:!0,url:t.payload}:e}var H=n(77),_=n(195),R=n.n(_),U=n(196),z=Object(H.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={fileinfo:S(e.fileinfo,t),pdfcontrol:L(e.pdfcontrol,t),videoControl:N(e.videoControl,t),pictureControl:B(e.pictureControl,t)};return n}),Object(H.a)(U.a,R.a));console.log(z.getState());var K=f.a.confirm;var T=[{title:"\u6587\u4ef6\u540d",dataIndex:"filename",key:"filename",render:function(e){return o.a.createElement("a",null,e)}},{title:"\u6587\u4ef6\u5927\u5c0f",dataIndex:"size",key:"size"},{title:"\u4e0a\u4f20\u65e5\u671f",dataIndex:"date",key:"date",sorter:function(e,t){return e.date-t.date}},{title:"\u6587\u4ef6\u7c7b\u578b",key:"tags",dataIndex:"tags",render:function(e){return o.a.createElement("span",null,o.a.createElement(d.a,{color:"volcano"},e))}},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return o.a.createElement("span",null,o.a.createElement("a",{style:{marginRight:16},onClick:function(){var e,n;e=t.key,n=t.path,K({title:"\u4f60\u786e\u5b9a\u4f60\u60f3\u8981\u5220\u9664\u8fd9\u4e2a\u6587\u4ef6\u5417?",icon:o.a.createElement(g.a,null),content:"When clicked the OK button, this dialog will be closed after 1 second",onOk:function(){z.dispatch(k(e,n))},onCancel:function(){}})}},"\u5220\u9664"),o.a.createElement("a",{onClick:function(){var e,n;console.log("\u4e0b\u8f7d"),console.log(t.path),e=t.path,n=t.filename,console.log("\u6211\u8981\u4e0b\u8f7d\u54af"),fetch("".concat(j,"/download?path=").concat(e)).then((function(e){return e.blob()})).then((function(e){if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(e,n);else{var t=document.createElement("a");document.body.appendChild(t);var a=window.URL.createObjectURL(e);t.href=a,t.download=n,t.target="_blank",t.click(),t.remove(),window.URL.revokeObjectURL(a)}}))}},"\u4e0b\u8f7d"))}}],q=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={data:[],curKey:0,isLoading:!0},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log("000"),this.props.getFileInfo(),this.setState({isLoading:!1})}},{key:"render",value:function(){return o.a.createElement(m.a,{tip:"Loading...",spinning:this.state.isLoading},o.a.createElement(p.a,{columns:T,dataSource:this.props.fileinfo,onRow:function(e){return{onDoubleClick:function(t){if(console.log(e),"pdf"===e.tags){console.log(e.path);var n=e.path,a=n.lastIndexOf("/");console.log(n[a]);var o=n.substring(a);z.dispatch(D(o))}else if("mp4"===e.tags){var i="".concat(j,"/preview?path=").concat(e.path);z.dispatch({type:"change-video-url",payload:i})}else if("png"===e.tags||"jpeg"===e.tags||"jpg"===e.tags||"gig"===e.tags){var c="".concat(j,"/preview?path=").concat(e.path);z.dispatch(function(e){return{type:"change-picture-url",payload:e}}(c))}},onClick:function(e){},onContextMenu:function(e){},onMouseEnter:function(e){},onMouseLeave:function(e){}}}}))}}]),t}(a.Component);var W,J=Object(v.b)((function(e){return{fileinfo:e.fileinfo}}),(function(e){return{getFileInfo:function(){e(E())},deleteFIle:function(t,n){e(k(t,n))},changePDFUrl:function(t){e(D(t))}}}))(q),G=n(78),V=n(472),Y=n(474),$=n(478),Q=V.a.Dragger,X=(W={name:"file",multiple:!0,director:!0,showUploadList:!0,action:"".concat(j,"/upload")},Object(G.a)(W,"name","fileName"),Object(G.a)(W,"onChange",(function(e){var t=e.file.status;"uploading"!==t&&console.log(e.file,e.fileList),"done"===t?(Y.a.success("".concat(e.file.name," \u6587\u4ef6\u4e0a\u4f20\u6210\u529f\uff01.")),z.dispatch(E())):"error"===t&&Y.a.error("".concat(e.file.name," \u6587\u4ef6\u4e0a\u4f20\u5931\u8d25."))})),W),Z=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(Q,X,o.a.createElement("p",{className:"ant-upload-drag-icon"},o.a.createElement($.a,null)),o.a.createElement("p",{className:"ant-upload-text"},"\u70b9\u51fb\u4e0a\u4f20\u6216\u5c06\u6587\u4ef6\u62d6\u653e\u5230\u8be5\u533a\u57df\u4e0a\u4f20"),o.a.createElement("p",{className:"ant-upload-hint"},"\u53cc\u51fb\u53ef\u9884\u89c8\u8be5\u884c\u7684\u6587\u4ef6\uff0c\u76ee\u524d\u652f\u6301",o.a.createElement("strong",null," paf/mp4,avi/png,jpeg,jpg,gif")," \u683c\u5f0f\u7684\u6587\u6863\u9884\u89c8"))}}]),t}(a.Component),ee=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).showModal=function(){n.prop.showPDF&&n.props.showPDF()},n.handleOk=function(e){console.log(e),n.setState({visible:!1}),n.props.hidePDF&&n.props.hidePDF()},n.handleCancel=function(e){console.log(e),n.props.hidePDF&&n.props.hidePDF()},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=document.documentElement.clientHeight,t="".concat(j,"/web/viewer.html?file=../file");return console.log(this.props.pdfurl),o.a.createElement("div",null,o.a.createElement(f.a,{title:"PDF\u6587\u6863\u9884\u89c8-gumeik",visible:this.props.isShowPDF,onOk:this.handleOk,onCancel:this.handleCancel,width:"85%",height:700,footer:null,bodyStyle:{padding:0,marginTop:0}},o.a.createElement("iframe",{src:"".concat(t).concat(this.props.pdfurl),style:{width:"100%",height:.7*e}})))}}]),t}(o.a.Component);var te=Object(v.b)((function(e){return{isShowPDF:e.pdfcontrol.show,pdfurl:e.pdfcontrol.url}}),(function(e){return{showPDF:function(){e(M)},hidePDF:function(){e(F)}}}))(ee),ne=n(37),ae=n(475),oe=(n(438),n(140));var ie={setCookie:function(e){if(e)for(var t in e)document.cookie="".concat(t,"=").concat(e[t])},getCookie:function(e){var t=document.cookie,n={};if(t.indexOf(";")>-1)for(var a=t.split("; "),o=a.length,i=0;i<o;i++){var c=a[i].split("="),r=Object(oe.a)(c,2),l=r[0],s=r[1];n[l]=s}else{var u=t.split("="),h=Object(oe.a)(u,2),d=h[0],p=h[1];n[d]=p}return e?n[e]:n}},ce=n(226),re=n.n(ce),le=ie.getCookie("userName"),se=re()("http://47.98.229.148:12306",{path:"/groupChat"}),ue=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).showMessage=function(e,t,n){if(e.username===n){var a='\n            <div class="right">\n                <span>'.concat(e.mes,'</span>\n                <div class="msg">\n                 <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1573550921439&di=ec4975809a74f75401856072576aaf77&imgtype=0&src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fq_70%2Cc_zoom%2Cw_640%2Fimages%2F20171128%2F353b161af85c49988edbf92bb50ef308.jpg" alt="">\n                </div>\n            </div>\n            ');t.innerHTML+=a}else{var o='\n            <div class="left">\n                <div class="msg">\n                 <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1573553154417&di=5f1359f3105f22c62e4129d9bd134911&imgtype=0&src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2Fc4406b693041c569327dba318e316be839faf2538414-fYFGb4_fw658" alt="">\n                </div>\n                <span>'.concat(e.mes,"</span>\n            </div>\n            ");t.innerHTML+=o}},n.handleKeyDown=function(e){if(13==e.which){var t=e.target.value;se.emit("chat message",{userName:"1",mes:t}),n.setState({}),e.target.value=""}},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){se.emit("chat message","");var e=this.showMessage;se.emit("con",{username:le});var t=this.refs.center;se.on("groupViewData",(function(n){t.innerHTML="";for(var a=0;a<n.length;a++)e(n[a],t,le);t.scrollTop=t.scrollHeight}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"wrapperMessageList"},o.a.createElement("div",{style:{width:this.props.width},className:"centerMessageList",ref:"center"}),o.a.createElement("div",{className:"bottomMessageList",style:{width:this.props.width}},o.a.createElement("i",{className:"iconfont iconyuyin"}),o.a.createElement("input",{type:"text",id:"message",ref:"input",onKeyDown:this.handleKeyDown}),o.a.createElement("i",{className:"iconfont iconbiaoqing"}),o.a.createElement("i",{className:"iconfont iconjiahao"})))}}]),t}(o.a.Component),he=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={visible:!1},n.showDrawer=function(){n.setState({visible:!0})},n.onClose=function(){n.setState({visible:!1})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=document.documentElement.clientHeight,t=document.documentElement.clientWidth;return console.log(t),o.a.createElement("div",null,o.a.createElement(ne.a,{style:{position:"fixed",bottom:"20px",right:"20px"},type:"primary",onClick:this.showDrawer},"live chat"),o.a.createElement(ae.a,{title:"livechat-gumei",placement:"right",closable:!1,onClose:this.onClose,visible:this.state.visible,width:.7*t,height:e,bodyStyle:{margin:0,padding:0}},o.a.createElement(ue,{width:.7*t})))}}]),t}(o.a.Component),de=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).showModal=function(){n.props.show&&n.props.show()},n.handleOk=function(e){n.props.hide&&n.props.hide()},n.handleCancel=function(e){n.props.hide&&n.props.hide()},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=document.documentElement.clientHeight;return o.a.createElement("div",null,o.a.createElement(f.a,{title:"\u8c37\u7f8e-\u89c6\u9891\u64ad\u653e\u9875",visible:this.props.isShowModal,onOk:this.handleOk,onCancel:this.handleCancel,okButtonProps:{disabled:!0},cancelButtonProps:{disabled:!0},width:"80%",footer:null,destroyOnClose:!0},o.a.createElement("video",{src:this.props.source,controls:!0,style:{width:"100%",height:.85*e}})))}}]),t}(o.a.Component);function pe(e){return{isShowModal:e.videoControl.isShowModal,source:e.videoControl.url}}var fe=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=pe(z.getState()),z.subscribe((function(){console.log(z.getState()),n.setState(pe(z.getState()))})),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=(e=z.dispatch,{show:function(){e(x)},hide:function(){e(P)}});return o.a.createElement(de,Object.assign({},this.state,t))}}]),t}(o.a.Component),me=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).showModal=function(){n.props.show&&n.props.show()},n.handleOk=function(e){n.props.hide&&n.props.hide()},n.handleCancel=function(e){n.props.hide&&n.props.hide()},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(f.a,{title:"\u8c37\u7f8e-\u56fe\u7247\u67e5\u770b\u9875",visible:this.props.isShowModal,onOk:this.handleOk,onCancel:this.handleCancel,okButtonProps:{disabled:!0},cancelButtonProps:{disabled:!0},width:"80%",footer:null},o.a.createElement("img",{src:this.props.source,controls:!0,style:{width:"100%"}})))}}]),t}(o.a.Component);function ge(e){return{isShowModal:e.pictureControl.isShowModal,source:e.pictureControl.url}}var ve=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=ge(z.getState()),z.subscribe((function(){console.log(z.getState()),n.setState(ge(z.getState()))})),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=(e=z.dispatch,{show:function(){e(I)},hide:function(){e(A)}});return o.a.createElement(me,Object.assign({},this.state,t))}}]),t}(o.a.Component),be=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(v.a,{store:z},o.a.createElement(te,null),o.a.createElement(Z,null),o.a.createElement(J,null),o.a.createElement(he,null),o.a.createElement(fe,null),o.a.createElement(ve,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[231,1,2]]]);
//# sourceMappingURL=main.4ea29de3.chunk.js.map