(this.webpackJsonpnetdisk=this.webpackJsonpnetdisk||[]).push([[0],{231:function(e,t,n){e.exports=n(470)},236:function(e,t,n){},438:function(e,t,n){},467:function(e,t){},470:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(3),i=n.n(c),r=(n(236),n(18)),l=n(19),s=n(22),u=n(20),f=n(23),d=n(476),p=n(471),h=(n(141),n(473)),m=n(204),g=n(477),v=n(67),b=n(138),y=n.n(b),w=n(68),O=n(194),j="http://47.98.229.148:2001";function k(e,t){return console.log(e,t),function(n){fetch("".concat(j,"/deletefile?path=").concat(t,"&key=").concat(e)),n(function(e){return{type:"reduce",payload:e}}(e))}}function E(){return console.log(-1),function(){var e=Object(O.a)(y.a.mark((function e(t,n){var a,o,c,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(j,"/getallfileinfo"),e.next=3,fetch(a);case 3:return o=e.sent,e.next=6,o.json();case 6:c=e.sent,i=(i=c.data).map((function(e){return Object(w.a)({},e,{key:e.filekey})})),console.log(0),t({type:"data",payload:i}),console.log(1);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}var C=n(229);function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"add"===t.type?[].concat(Object(C.a)(e),[t.payload]):"reduce"===t.type?e.filter((function(e){return e.key!==t.payload})):"data"===t.type?t.payload:e}var D={type:"pdfshow"},L={type:"pdfhide"};function x(e){return{type:"pdfchangeurl",payload:e}}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1,url:""},t=arguments.length>1?arguments[1]:void 0;return"pdfshow"===t.type?Object(w.a)({},e,{show:!0}):"pdfhide"==t.type?Object(w.a)({},e,{show:!1}):"pdfchangeurl"===t.type?Object(w.a)({},e,{url:t.payload,show:!0}):e}var P=n(76),N=n(195),S=n.n(N),I=n(196),_=Object(P.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={fileinfo:F(e.fileinfo,t),pdfcontrol:M(e.pdfcontrol,t)};return n}),Object(P.a)(I.a,S.a));console.log(_.getState());var A=h.a.confirm;var H=[{title:"\u6587\u4ef6\u540d",dataIndex:"filename",key:"filename",render:function(e){return o.a.createElement("a",null,e)}},{title:"\u6587\u4ef6\u5927\u5c0f",dataIndex:"size",key:"size"},{title:"\u4e0a\u4f20\u65e5\u671f",dataIndex:"date",key:"date",sorter:function(e,t){return e.date-t.date}},{title:"\u6587\u4ef6\u7c7b\u578b",key:"tags",dataIndex:"tags",render:function(e){return o.a.createElement("span",null,o.a.createElement(d.a,{color:"volcano"},e))}},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return o.a.createElement("span",null,o.a.createElement("a",{style:{marginRight:16},onClick:function(){var e,n;e=t.key,n=t.path,A({title:"\u4f60\u786e\u5b9a\u4f60\u60f3\u8981\u5220\u9664\u8fd9\u4e2a\u6587\u4ef6\u5417?",icon:o.a.createElement(g.a,null),content:"When clicked the OK button, this dialog will be closed after 1 second",onOk:function(){_.dispatch(k(e,n))},onCancel:function(){}})}},"\u5220\u9664"),o.a.createElement("a",{onClick:function(){var e,n;console.log("\u4e0b\u8f7d"),console.log(t.path),e=t.path,n=t.filename,console.log("\u6211\u8981\u4e0b\u8f7d\u54af"),fetch("".concat(j,"/download?path=").concat(e)).then((function(e){return e.blob()})).then((function(e){if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(e,n);else{var t=document.createElement("a");document.body.appendChild(t);var a=window.URL.createObjectURL(e);t.href=a,t.download=n,t.target="_blank",t.click(),t.remove(),window.URL.revokeObjectURL(a)}}))}},"\u4e0b\u8f7d"))}}],R=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={data:[],curKey:0,isLoading:!0},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log("000"),this.props.getFileInfo(),this.setState({isLoading:!1})}},{key:"render",value:function(){return o.a.createElement(m.a,{tip:"Loading...",spinning:this.state.isLoading},o.a.createElement(p.a,{columns:H,dataSource:this.props.fileinfo,onRow:function(e){return{onDoubleClick:function(t){if(console.log(e),"pdf"===e.tags){console.log(e.path);var n=e.path,a=n.lastIndexOf("/");console.log(n[a]);var o=n.substring(a);_.dispatch(x(o))}},onClick:function(e){},onContextMenu:function(e){},onMouseEnter:function(e){},onMouseLeave:function(e){}}}}))}}]),t}(a.Component);var U,z=Object(v.b)((function(e){return{fileinfo:e.fileinfo}}),(function(e){return{getFileInfo:function(){e(E())},deleteFIle:function(t,n){e(k(t,n))},changePDFUrl:function(t){e(x(t))}}}))(R),K=n(77),T=n(472),q=n(474),B=n(478),W=T.a.Dragger,J=(U={name:"file",multiple:!0,director:!0,showUploadList:!0,action:"".concat(j,"/upload")},Object(K.a)(U,"name","fileName"),Object(K.a)(U,"onChange",(function(e){var t=e.file.status;"uploading"!==t&&console.log(e.file,e.fileList),"done"===t?(q.a.success("".concat(e.file.name," \u6587\u4ef6\u4e0a\u4f20\u6210\u529f\uff01.")),_.dispatch(E())):"error"===t&&q.a.error("".concat(e.file.name," \u6587\u4ef6\u4e0a\u4f20\u5931\u8d25."))})),U),G=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(W,J,o.a.createElement("p",{className:"ant-upload-drag-icon"},o.a.createElement(B.a,null)),o.a.createElement("p",{className:"ant-upload-text"},"\u70b9\u51fb\u4e0a\u4f20\u6216\u5c06\u6587\u4ef6\u62d6\u653e\u5230\u8be5\u533a\u57df\u4e0a\u4f20"),o.a.createElement("p",{className:"ant-upload-hint"},"\u53cc\u51fb\u53ef\u9884\u89c8\u8be5\u884c\u7684\u6587\u4ef6\uff0c\u76ee\u524d\u4ec5\u652f\u6301",o.a.createElement("strong",null," PDF")," \u683c\u5f0f\u7684\u6587\u6863\u9884\u89c8"))}}]),t}(a.Component),V=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).showModal=function(){n.prop.showPDF&&n.props.showPDF()},n.handleOk=function(e){console.log(e),n.setState({visible:!1}),n.props.hidePDF&&n.props.hidePDF()},n.handleCancel=function(e){console.log(e),n.props.hidePDF&&n.props.hidePDF()},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=document.documentElement.clientHeight,t="".concat(j,"/web/viewer.html?file=../file");return console.log(this.props.pdfurl),o.a.createElement("div",null,o.a.createElement(h.a,{title:"PDF\u6587\u6863\u9884\u89c8-gumeik",visible:this.props.isShowPDF,onOk:this.handleOk,onCancel:this.handleCancel,width:"85%",height:700,footer:null,bodyStyle:{padding:0,marginTop:0}},o.a.createElement("iframe",{src:"".concat(t).concat(this.props.pdfurl),style:{width:"100%",height:.7*e}})))}}]),t}(o.a.Component);var Y=Object(v.b)((function(e){return{isShowPDF:e.pdfcontrol.show,pdfurl:e.pdfcontrol.url}}),(function(e){return{showPDF:function(){e(D)},hidePDF:function(){e(L)}}}))(V),$=n(36),Q=n(475),X=(n(438),n(140));var Z={setCookie:function(e){if(e)for(var t in e)document.cookie="".concat(t,"=").concat(e[t])},getCookie:function(e){var t=document.cookie,n={};if(t.indexOf(";")>-1)for(var a=t.split("; "),o=a.length,c=0;c<o;c++){var i=a[c].split("="),r=Object(X.a)(i,2),l=r[0],s=r[1];n[l]=s}else{var u=t.split("="),f=Object(X.a)(u,2),d=f[0],p=f[1];n[d]=p}return e?n[e]:n}},ee=n(226),te=n.n(ee),ne=Z.getCookie("userName"),ae=te()("http://47.98.229.148:12306",{path:"/groupChat"}),oe=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).showMessage=function(e,t,n){if(e.username===n){var a='\n            <div class="right">\n                <span>'.concat(e.mes,'</span>\n                <div class="msg">\n                 <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1573550921439&di=ec4975809a74f75401856072576aaf77&imgtype=0&src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fq_70%2Cc_zoom%2Cw_640%2Fimages%2F20171128%2F353b161af85c49988edbf92bb50ef308.jpg" alt="">\n                </div>\n            </div>\n            ');t.innerHTML+=a}else{var o='\n            <div class="left">\n                <div class="msg">\n                 <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1573553154417&di=5f1359f3105f22c62e4129d9bd134911&imgtype=0&src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2Fc4406b693041c569327dba318e316be839faf2538414-fYFGb4_fw658" alt="">\n                </div>\n                <span>'.concat(e.mes,"</span>\n            </div>\n            ");t.innerHTML+=o}},n.handleKeyDown=function(e){if(13==e.which){var t=e.target.value;ae.emit("chat message",{userName:"1",mes:t}),e.target.value=""}},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){ae.emit("chat message","");var e=this.showMessage;ae.emit("con",{username:ne});var t=this.refs.center;ae.on("groupViewData",(function(n){t.innerHTML="";for(var a=0;a<n.length;a++)e(n[a],t,ne);t.scrollTop=t.scrollHeight}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"wrapperMessageList"},o.a.createElement("div",{className:"centerMessageList",ref:"center"}),o.a.createElement("div",{className:"bottomMessageList"},o.a.createElement("i",{className:"iconfont iconyuyin"}),o.a.createElement("input",{type:"text",id:"message",ref:"input",onKeyDown:this.handleKeyDown}),o.a.createElement("i",{className:"iconfont iconbiaoqing"}),o.a.createElement("i",{className:"iconfont iconjiahao"})))}}]),t}(o.a.Component),ce=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={visible:!1},n.showDrawer=function(){n.setState({visible:!0})},n.onClose=function(){n.setState({visible:!1})},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=document.documentElement.clientHeight;return o.a.createElement("div",null,o.a.createElement($.a,{style:{position:"fixed",bottom:"20px",right:"20px"},type:"primary",onClick:this.showDrawer},"live chat"),o.a.createElement(Q.a,{title:"livechat-gumei",placement:"right",closable:!1,onClose:this.onClose,visible:this.state.visible,width:500,height:e,bodyStyle:{margin:0,padding:0}},o.a.createElement(oe,null)))}}]),t}(o.a.Component),ie=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(v.a,{store:_},o.a.createElement(Y,null),o.a.createElement(G,null),o.a.createElement(z,null),o.a.createElement(ce,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[231,1,2]]]);
//# sourceMappingURL=main.6910f0b2.chunk.js.map