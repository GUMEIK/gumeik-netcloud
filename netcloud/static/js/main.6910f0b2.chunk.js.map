{"version":3,"sources":["api/baseurl.js","store/action/fileinfo.js","store/reduce/fileinfo.js","store/action/pdfviewer.js","store/reduce/pdfviewer.js","store/reduce/index.js","store/store.js","components/FilesList/index.js","components/upload/index.js","components/modal/index.js","components/livechat/cookie.js","components/livechat/chatCom.js","components/livechat/index.js","App.js","serviceWorker.js","index.js"],"names":["baseurl","deleteFIle","key","path","console","log","dispatch","fetch","type","payload","createDeleteFIleAction","getFileInfo","getState","a","url","resp","json","result","data","map","el","filekey","fileinfoReduce","state","action","filter","pdfShowAction","pdfhideAction","createPdfchangeurlAction","newurl","pdfviererReduce","show","store","createStore","newState","fileinfo","pdfcontrol","applyMiddleware","thunk","logger","confirm","Modal","columns","title","dataIndex","render","text","sorter","b","date","tag","color","record","style","marginRight","onClick","icon","ExclamationCircleOutlined","content","onOk","onCancel","filename","then","res","blob","window","navigator","msSaveOrOpenBlob","msSaveBlob","document","createElement","body","appendChild","URL","createObjectURL","href","download","target","click","remove","revokeObjectURL","FileList","curKey","isLoading","this","props","setState","tip","spinning","dataSource","onRow","onDoubleClick","event","tags","pathstr","index","lastIndexOf","substring","onContextMenu","onMouseEnter","onMouseLeave","Component","hoc","connect","changePDFUrl","Dragger","Upload","name","multiple","director","showUploadList","info","status","file","fileList","message","success","error","UploadCom","className","InboxOutlined","ModalCom","showModal","prop","showPDF","handleOk","e","visible","hidePDF","handleCancel","height","documentElement","clientHeight","baseurlDev","pdfurl","isShowPDF","width","footer","bodyStyle","padding","marginTop","src","React","setCookie","cookieObj","cookie","getCookie","obj","indexOf","cookieArray","split","len","length","i","value","userName","socket","io","MessageList","showMessage","dom","username","htmlStr","mes","innerHTML","handleKeyDown","which","msg","emit","refs","center","on","scrollTop","scrollHeight","ref","id","onKeyDown","LIveChat","showDrawer","onClose","position","bottom","right","placement","closable","margin","App","Boolean","location","hostname","match","ReactDOM","getElementById","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.6910f0b2.chunk.js","sourcesContent":["// 　　本地测试\nconst devURL = \"http://localhost:2001\";\nconst produURL = `http://47.98.229.148:2001`;\nexport const baseurl = produURL;","import {baseurl} from '../../api/baseurl'\n// 增加\nexport const fileAddType = \"add\";\nexport const fileRduceType = \"reduce\";\nexport const fileDataType = \"data\";\n\n// [{}{}{}]\nfunction createAddFileAction(fileinfo) {\n    return {\n        type: fileAddType,\n        payload: fileinfo\n    }\n}\n\nfunction createDeleteFIleAction(key) {\n    return {\n        type: fileRduceType,\n        payload: key\n    }\n}\n\nexport function deleteFIle(key,path) {\n    console.log(key,path)\n    return   function (dispatch) {\n        fetch(`${baseurl}/deletefile?path=${path}&key=${key}`);\n        dispatch(createDeleteFIleAction(key));\n    }\n}\n\n\n\n\nfunction createGetFileInfoAction(fileinfoArr) {\n    return {\n        type: fileDataType,\n        payload: fileinfoArr\n    }\n}\n// 副作用函数\n\n\nexport function getFileInfo() {\n    console.log(-1)\n    return async (dispatch, getState) => {\n        const url = `${baseurl}/getallfileinfo`;\n        let resp = await fetch(url)\n        let result = await resp.json();\n        let data = result.data;\n        data = data.map(el=>{\n            return {...el,key:el.filekey}\n        })\n        console.log(0)\n        dispatch(createGetFileInfoAction(data));\n        console.log(1)\n    }\n}","// [{}{}{}]\nimport {fileAddType,fileRduceType,fileDataType} from '../action/fileinfo'\n\nexport function fileinfoReduce(state = [],action){\n    if(action.type === fileAddType ){\n        return [...state,action.payload]\n    }else if(action.type === fileRduceType){\n        return state.filter(el=>{\n            if(el.key !== action.payload){\n                return true;\n            }\n            return false;\n        })\n    }else if(action.type === fileDataType){\n        return action.payload;\n    }\n    return state;\n}","export const pdfshowType = \"pdfshow\";\nexport const pdfhideType = \"pdfhide\";\nexport const pdfchangeurlType = \"pdfchangeurl\";\n\nexport const pdfShowAction = {\n    type:pdfshowType\n}\nexport const pdfhideAction = {\n    type:pdfhideType\n}\nexport function createPdfchangeurlAction(newurl){\n    return {\n        type:pdfchangeurlType,\n        payload:newurl\n    }\n}","import {pdfchangeurlType,pdfhideType,pdfshowType} from '../action/pdfviewer'\n\nexport function pdfviererReduce(state = {\n    show:false,\n    url:''\n},action){\n    if(action.type === pdfshowType){\n        return {...state,show:true}\n    }else if(action.type == pdfhideType){\n        return {...state,show:false}\n    }else if(action.type === pdfchangeurlType){\n        return {...state,url:action.payload,show:true}\n    }\n    return state;\n}","import {fileinfoReduce} from './fileinfo';\nimport {pdfviererReduce} from './pdfviewer'\nexport default function(store = {},action){\n    const newState = {\n        fileinfo:fileinfoReduce(store.fileinfo,action),\n        pdfcontrol:pdfviererReduce(store.pdfcontrol,action)\n    }\n    return newState;\n}","import reduce from './reduce';\nimport {createStore,applyMiddleware} from \"redux\"\nimport logger from 'redux-logger';\nimport thunk from 'redux-thunk'\nexport const store = createStore(reduce,applyMiddleware(thunk,logger));\nconsole.log(store.getState())","import { Table, Tag } from 'antd';\nimport React, { Component } from 'react'\nimport \"antd/dist/antd.css\"\nimport { Modal, Button , Spin} from 'antd';\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\nimport {connect} from 'react-redux'\nimport { fileDataType } from '../../store/action/fileinfo';\nimport {getFileInfo,deleteFIle} from '../../store/action/fileinfo'\nimport {store} from '../../store/store'\nimport {baseurl} from '../../api/baseurl'\nimport {createPdfchangeurlAction} from '../../store/action/pdfviewer'\nconst { confirm } = Modal;\n\nfunction showConfirm(key,path) {\n  // console.log(curkey)\n  confirm({\n    title: '你确定你想要删除这个文件吗?',\n    icon: <ExclamationCircleOutlined />,\n    content: 'When clicked the OK button, this dialog will be closed after 1 second',\n    onOk() {\n      store.dispatch(deleteFIle(key,path));\n    },\n    onCancel() {},\n  });\n}\n\nfunction download(path,filename){\n  console.log(\"我要下载咯\")\n  fetch(`${baseurl}/download?path=${path}`).then(res=>res.blob()).then(blob=>{\n    if (window.navigator.msSaveOrOpenBlob) {\n        navigator.msSaveBlob(blob, filename);  //兼容ie10\n    } else {\n        var a = document.createElement('a');\n        document.body.appendChild(a) //兼容火狐，将a标签添加到body当中\n        var url = window.URL.createObjectURL(blob);   // 获取 blob 本地文件连接 (blob 为纯二进制对象，不能够直接保存到磁盘上)\n        a.href = url;\n        a.download = filename;\n        a.target='_blank'  // a标签增加target属性\n        a.click();\n        a.remove()  //移除a标签\n        window.URL.revokeObjectURL(url);\n    }\n  });\n}\n\nconst columns = [\n  {\n    title: '文件名',\n    dataIndex: 'filename',\n    key: 'filename',\n    render: text => <a>{text}</a>,\n  },\n  {\n    title: '文件大小',\n    dataIndex: 'size',\n    key: 'size',\n  },\n  {\n    title: '上传日期',\n    dataIndex: 'date',\n    key: 'date',\n    sorter: (a, b) => {\n      // console.log(a,b);\n      return a.date- b.date;\n    }\n  },\n  {\n    title: '文件类型',\n    key: 'tags',\n    dataIndex: 'tags',\n    render: tag => (\n      <span>\n        {\n            <Tag color=\"volcano\">\n              {tag}\n            </Tag>\n        }\n      </span>\n    ),\n  },\n  {\n    title: '操作',\n    key: 'action',\n    render: (text, record) => {\n      // console.log(text,record)\n      return (\n        <span>\n          <a style={{ marginRight: 16 }}\n          onClick={()=>{\n            showConfirm(record.key,record.path);\n          }}\n          >删除</a>\n          <a onClick={()=>{\n            console.log(\"下载\")\n            console.log(record.path)\n            download(record.path,record.filename);\n          }}>下载</a>\n        </span>\n      )\n    },\n  },\n];\n/**\n * filename  文件名称\n * size  文件大小\n * date 上传日期\n * tags 文件类型\n * action 操作\n */\n\n\n\nclass FileList extends Component {\n  state = {\n    data:[],\n    curKey:0,\n    isLoading:true\n  }\n  componentDidMount(){\n    console.log(\"000\")\n    this.props.getFileInfo();\n   this.setState({\n     isLoading:false\n   })\n  }\n    render() {\n        return (\n          <Spin tip=\"Loading...\"\n          spinning={this.state.isLoading}\n          >\n            <Table columns={columns} \n            dataSource={this.props.fileinfo} \n            onRow={record => {\n              return {\n                onDoubleClick: event => {\n                  console.log(record)\n                  if(record.tags===\"pdf\"){\n                    console.log(record.path)\n                    const pathstr = record.path;\n                    const index = pathstr.lastIndexOf(\"/\");\n                    console.log(pathstr[index])\n                    let path = pathstr.substring(index);\n                    store.dispatch(createPdfchangeurlAction(path));\n                  }\n                }, // 点击行\n                onClick: event => {},\n                onContextMenu: event => {},\n                onMouseEnter: event => {}, // 鼠标移入行\n                onMouseLeave: event => {},\n              };\n            }}\n            />\n          </Spin>\n        )\n    }\n}\n\nfunction mapStateToProps(state){\n  return {\n    fileinfo:state.fileinfo\n  }\n}\n\nfunction mapDispatchToProps(dispatch){\n  return {\n    getFileInfo(){\n      dispatch(getFileInfo())\n    },\n    deleteFIle(key,path){\n      dispatch(deleteFIle(key,path))\n    },\n    changePDFUrl(url){\n      dispatch(createPdfchangeurlAction(url));\n    }\n  }\n}\n\nconst hoc = connect(mapStateToProps,mapDispatchToProps);\nexport default hoc(FileList);\n\n","import { Upload, message } from 'antd';\nimport { InboxOutlined } from '@ant-design/icons';\nimport 'antd/dist/antd.css';\nimport React, { Component } from 'react'\nimport {store} from '../../store/store'\nimport {getFileInfo} from '../../store/action/fileinfo'\nimport {baseurl} from '../../api/baseurl'\nconst { Dragger } = Upload;\n\nconst props = {\n  name: 'file',\n  multiple: true,\n  director:true,\n  showUploadList:true,//是否显示上传文件列表\n  action: `${baseurl}/upload`,//请求接口地址\n  name:\"fileName\",//表单域名称(与后台配合)\n  onChange(info) {\n    const { status } = info.file;\n    if (status !== 'uploading') {\n      console.log(info.file, info.fileList);\n    }\n    if (status === 'done') {\n      message.success(`${info.file.name} 文件上传成功！.`);\n      store.dispatch(getFileInfo());\n    } else if (status === 'error') {\n      message.error(`${info.file.name} 文件上传失败.`);\n    }\n    // console.log(info)\n  },\n};\nexport default class UploadCom extends Component {\n    render() {\n        return (\n            <Dragger {...props}>\n            <p className=\"ant-upload-drag-icon\">\n              <InboxOutlined />\n            </p>\n            <p className=\"ant-upload-text\">点击上传或将文件拖放到该区域上传</p>\n            <p className=\"ant-upload-hint\">\n              双击可预览该行的文件，目前仅支持<strong> PDF</strong> 格式的文档预览\n            </p>\n          </Dragger>\n        )\n    }\n}\n\n\n\n\n","import { Modal, Button } from 'antd';\nimport React, { Component } from 'react'\nimport {pdfhideAction,pdfShowAction,createPdfchangeurlAction}from '../../store/action/pdfviewer'\n// import {store} from '../../store/store'\nimport {connect} from 'react-redux'\nimport {baseurl} from '../../api/baseurl'\nclass ModalCom extends React.Component {\n//   state = { visible: false };\n  showModal = () => {\n    // this.setState({\n    //   visible: true,\n    // });\n    this.prop.showPDF && this.props.showPDF();\n  };\n\n  handleOk = e => {\n    console.log(e);\n    this.setState({\n      visible: false,\n    });\n    this.props.hidePDF && this.props.hidePDF();\n  };\n\n  handleCancel = e => {\n    console.log(e);\n    // this.setState({\n    //   visible: false,\n    // });\n    this.props.hidePDF && this.props.hidePDF();\n  };\n\n  render() {\n    const height = document.documentElement.clientHeight;\n    const baseurlDev = `${baseurl}/web/viewer.html?file=../file`\n    // /home/gumeik/桌面/uploadAndDowload/public/file/edu.pdf\n    console.log(this.props.pdfurl)\n    return (\n      <div>\n        {/* <Button type=\"primary\" onClick={this.showModal}>\n          Open Modal\n        </Button> */}\n        <Modal\n          title=\"PDF文档预览-gumeik\"\n          visible={this.props.isShowPDF}\n          onOk={this.handleOk}\n          onCancel={this.handleCancel}\n          width=\"85%\"\n          height={700}\n          footer={null}\n          bodyStyle={{\n              padding:0,\n              marginTop:0\n          }}\n        >\n          <iframe                 \n                src={`${baseurlDev}${this.props.pdfurl}`}\n                style={{width:\"100%\",height:height*0.7}}\n             ></iframe>\n        </Modal>\n      </div>\n    );\n  }\n}\n\n\nfunction mapStateToProps(state){\n    return{\n        isShowPDF:state.pdfcontrol.show,\n        pdfurl:state.pdfcontrol.url\n    }\n  }\n  function mapDispatchToProps(dispatch){\n    return {\n        showPDF(){\n            dispatch(pdfShowAction);\n        },\n        hidePDF(){\n            dispatch(pdfhideAction);\n        }\n    }\n  }\n\n  const hoc = connect(mapStateToProps,mapDispatchToProps);\n  export default hoc(ModalCom)","function setCookie(cookieObj){\n    if(!cookieObj) return;\n    for(let prop in cookieObj){\n        document.cookie = `${prop}=${cookieObj[prop]}`\n    }\n    \n}\n\nfunction getCookie(key){\n    let cookie = document.cookie;\n    let obj = {};\n    if(cookie.indexOf(\";\") > -1){\n        let cookieArray = cookie.split(\"; \");\n        let len = cookieArray.length;\n        for(let i = 0;i < len;i++){\n            let [name,value]= cookieArray[i].split(\"=\");\n            obj[name] = value;\n        }\n    }else{\n        let [name,value] = cookie.split(\"=\");\n        obj[name] = value;\n    }\n    if(key) return obj[key];\n    return obj;\n}\n\nexport default {\n    setCookie,\n    getCookie\n}","import React from 'react'\nimport './chatCom.css'\nimport cookie from './cookie'\nimport io from 'socket.io-client'\n// import {Link} from 'react-router-dom' \nconst userName = cookie.getCookie('userName');\n\nconst socket = io(\"http://47.98.229.148:12306\",{\n    path:'/groupChat'\n})\n\n\n\nclass MessageList extends React.Component{\n\n    showMessage = (data,dom,userName) => {\n        \n        if (data.username === userName) {\n            let htmlStr = `\n            <div class=\"right\">\n                <span>${data.mes}</span>\n                <div class=\"msg\">\n                 <img src=\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1573550921439&di=ec4975809a74f75401856072576aaf77&imgtype=0&src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fq_70%2Cc_zoom%2Cw_640%2Fimages%2F20171128%2F353b161af85c49988edbf92bb50ef308.jpg\" alt=\"\">\n                </div>\n            </div>\n            `;\n            dom.innerHTML += htmlStr;\n        } else{\n            let htmlStr = `\n            <div class=\"left\">\n                <div class=\"msg\">\n                 <img src=\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1573553154417&di=5f1359f3105f22c62e4129d9bd134911&imgtype=0&src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2Fc4406b693041c569327dba318e316be839faf2538414-fYFGb4_fw658\" alt=\"\">\n                </div>\n                <span>${data.mes}</span>\n            </div>\n            `;\n            dom.innerHTML += htmlStr;\n        }\n    }\n\n    componentDidMount(){\n        socket.emit(\"chat message\",'')\n        let showMessage = this.showMessage;\n        socket.emit(\"con\", {\n            username: userName\n        });\n        const dom = this.refs.center;\n        \n        socket.on(\"groupViewData\",function(data){\n            dom.innerHTML = '';\n            for(let i= 0;i < data.length;i++){\n                showMessage(data[i],dom,userName)\n            }\n            // 永远保持滚动条在最下方\n            dom.scrollTop =dom.scrollHeight;\n        })\n    }\n    handleKeyDown = (e)=>{\n        if(e.which == 13){\n            let msg = e.target.value;\n            socket.emit(\"chat message\",{\n                userName:\"1\",\n                mes:msg\n            });\n            e.target.value = '';\n        }\n    }\n\n    render(){\n        return (\n            <div className=\"wrapperMessageList\">\n            <div className=\"centerMessageList\" ref=\"center\">         \n            </div>\n            <div className=\"bottomMessageList\">\n                <i className=\"iconfont iconyuyin\"></i>\n                <input type=\"text\" id=\"message\" ref=\"input\" onKeyDown={this.handleKeyDown} />\n                <i className=\"iconfont iconbiaoqing\"></i>\n                <i className=\"iconfont iconjiahao\"></i>\n            </div>\n        </div>\n\n        )\n    }\n}\n\nexport default MessageList;","import { Drawer, Button } from 'antd';\nimport React, { Component } from 'react'\nimport ChatCom from './chatCom'\n\n\nexport default class LIveChat extends React.Component {\n  state = { visible: false };\n\n  showDrawer = () => {\n    this.setState({\n      visible: true,\n    });\n  };\n\n  onClose = () => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  render() {\n      const height = document.documentElement.clientHeight;\n    return (\n      <div>\n        <Button \n        style={{position:\"fixed\",bottom:\"20px\",right:\"20px\"}}\n        type=\"primary\" onClick={this.showDrawer}>\n          live chat\n        </Button>\n        <Drawer\n          title=\"livechat-gumei\"\n          placement=\"right\"\n          closable={false}\n          onClose={this.onClose}\n          visible={this.state.visible}\n          width={500}\n          height={height}\n          bodyStyle={{\n              margin:0,\n              padding:0\n          }}\n        >\n          <ChatCom/>\n        </Drawer>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react'\nimport FIleList from './components/FilesList'\nimport Upload from './components/upload'\nimport {store} from './store/store'\nimport './store/store'\nimport {Provider} from 'react-redux'\nimport PdfViewer from './components/modal'\nimport LiveChat from './components/livechat'\nexport default class App extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <PdfViewer/>\n        <Upload></Upload>\n        <FIleList/>\n        <LiveChat/>\n      </Provider>\n    )\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}